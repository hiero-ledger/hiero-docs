---
description: 分发共识算法
---

# Hashgra共识算法

散列图协商一致算法使得能够以创新、有效的方式分发协商一致意见。 哈希图是一种分布式协商一致的算法和数据结构，这种算法和结构是迅速、公平和安全的。 这间接地建立了一个受信任的社区，即使成员之间不一定相互信任。

[哈希图共识算法](./) 和平台代码在 Apache 2.0 许可下是开源的。

{% 嵌入的 url="https://www.youtube.com/watch?v=cje1vuVKhwY&t=5s" %}

## 业绩

### 费用

从避免工作证明的意义上来说，散布的费用不高。 经营哈希图节点的个人和组织不需要购买昂贵的自定义采矿设备。 相反，它们可以随时运转，成本效益高的硬件。 散列图100%效率高，在计算上没有浪费任何资源来减缓其速度。

### 效率

哈希图100%效率高，因为区块链中使用了该术语。 在区块链中，工作有时被浪费掉了一个后来被认为是陈旧的区块，被社区丢弃。 在哈希图形中，等于一个“方块”永远不会落空。 哈希格也有效地使用了带宽。 只是通知某一交易的所有节点所需的带宽数量（即使没有就该交易的时间戳达成共识）， 哈希图只增加了一个非常小的间接费用，超出了绝对最低限度。 此外， hashgraph的投票算法不需要发送任何额外的消息才能使节点在社区了解交易本身的消息之外进行投票(或计票)。

### 流经量

哈希图速度很快。 它只受带宽限制。 如果每个成员都有足够的带宽，每秒下载和上传特定的交易数， 整个系统能够处理与许多人接近的问题。 即使家庭互联网连接很快也能够快速地处理全世界整个VISA卡网络的所有交易。

### **State Efficiency**

事件一旦发生，在几秒钟内，社区中的每个人都会知道它应该放在历史上的位置，并且百分之百地确定下来。 更重要的是，每个人都知道这一点。 在这一点上，它们只能纳入交易的效果，除非有必要进行今后的审计或履约，否则就放弃这种效果。 所以，在最小的加密货币系统中，每个成员只需要存储每个帐户中不为空的当前余额。 他们不需要记住导致这些余额返回“起源”的交易的全部历史。

## 安全

### 异步Byzantine 故障公差

哈希图共识算法是异步Byzantine 故障公差。 这意味着任何一个成员（或少数成员）都不能阻止社区达成共识。 一旦达成共识，它们也不能改变这种共识。 每个成员最终将达到他们知道已达成共识的程度。 区块链没有Byzantine 协议的担保。 因为成员从未肯定同意已经实现(仅有随时间增加的概率)。 Blockchain 也不是Byzantine ，因为它不会自动处理网络分区。 如果一组矿工与互联网其他部分隔离， 这可以使多个链条成长，而这种成长是在交易顺序上相互冲突的。

值得注意的是，“Byzantine Fault Timperant”（BFT）一词有时在一种较弱的意义上被其他协商一致的算法所使用。 但在这方面，它最初的含义是(1) 每个成员最终都知道达成了协商一致意见。 (2) 攻击者可能相互勾结，(3) 攻击者甚至控制互联网本身(有一些限制)。 哈希格是 Byzantine, 即使按照这个更强有力的定义。

根据对网络和信息传送的假设，BFT的程度不同。 最强大形式的BFT是异步的，即使恶意行为者能够控制网络并删除或减缓他们所选择的信息，也能够达成共识。 唯一的假设是，超过2位的私密性3正在正确地遵循协议，如果消息是通过互联网从一个节点反复发送到另一个节点， 一个人最终会经得到，然后最终会经受住另一个意志，等等。 有些系统部分异步， 只有当攻击者没有太大的力量并且不太多地操纵消息的时间时，才是安全的。 例如，部分异步系统可以证明Byzantine ，假定消息在十秒钟内通过互联网传递。 这种假设忽视了机器人、分布式拒绝服务攻击和恶意防火墙的现实。

### ACID 遵守情况

哈希图是 ACID 兼容的。 ACID（大小一致性、孤立性、持久性）是一个数据库术语，当它作为分布式数据库使用时，适用于散列图。 节点群集利用它就交易发生的先后顺序达成共识。 在达成共识后，每个节点都会将这些交易反馈到该节点的本地数据库副本上，每个节点都会按照协商一致的顺序发送。 如果本地数据库具有数据库的所有标准属性 (ACID)， 这样，整个社区就可以说有一个单一的、分布式的与这些属性相同的数据库。 在区块链中，从来没有任何时候你知道已经达成了协商一致，因此它不会遵守ACID。

### 分布式拒绝服务 (DDoS) 攻击抗性

当攻击者能够将一个诚实的节点淹没在一个没有意义的信息的网络上时，就发生了一种拒绝提供服务（DoS）的攻击。 防止该节点履行其他(有效的)义务和角色。 分布式拒绝服务(DDoS)利用公共服务或装置无意地扩大了DoS的攻击范围——使其成为更大的威胁。

在分布式分类账中，DDoS攻击可能会以有助于确定共识的节点为攻击目标。 这有可能阻止建立这一共识。

Hashgra是DDoS的复原力，因为它没有赋予任何一个节点或少数在建立共识方面具有特殊权利或责任的节点。 比特币和哈希图都是以抗拒DDoS攻击的方式分发的。 攻击者可能用数据包淹没一个成员或矿工，暂时断开他们与互联网的连接。 但是，整个社区将继续正常运作。 对整个系统的攻击将使很大一部分成员被包淹没，这是比较困难的。 已经提出了一些替代基于区块链的替代办法来取代基于领导人或往来抢劫。 提出这些建议是为了避免比特币的工作证明费用。 但他们的缺点是对裁军部的攻击保持敏感。 如果攻击者攻击现任领导人并在选择新领导人后立即切换到攻击新领导人， 然后攻击者可以冻结整个系统，同时仍然只攻击一台计算机。 哈希格省避免了这个问题，但仍然不需要工作证明。

## 公平性

哈希格是公平的，因为没有任何头领或矿工被授予特别权限来决定分配给交易的协商一致的时间戳。 相反，协商一致的交易时间戳是通过表决程序计算的，在表决过程中，节点集体和民主地建立共识。 我们可以区分公平的三个方面。

### 公平访问

哈希格基本上是公平的，因为没有人能够阻止某项交易进入系统，甚至拖延很久。 如果某个(或少数)恶意节点试图阻止某项交易交付给其他社区，则将其加入协商一致， 然后，gossip 协议的随机性质将确保交易流量围绕那个屏蔽。

### 公平的时间戳

哈希图给每个交易提供了协商一致的时间戳，反映了网络大多数成员何时收到该交易。 这一协商一致的时间戳是“公平的”， 因为恶意节点不可能损坏它并使它与当时大不相同。 每笔交易都有一个协商一致的时间，即每个成员说它最初收到交易的中位数。 收到此处指的是某个节点首次通过gossip从另一个节点转过交易的时间。 这是协商一致的一部分，成为拜占庭的所有保证也是如此。 如果超过2名参与成员诚实并在计算机上有可靠的时钟，那么时间戳本身将是诚实和可靠的。 因为它是由诚实和可靠的成员产生的或是由诚实和可靠的成员产生的两次之间的关系。 由于散列图占所有这些时间的中位数，因此协商一致的时间戳是强有力的。 即使有几个时钟有点错了。 或者即使一些节点恶意给出了很差的时间。 这种做法对协商一致的时间安排没有产生重大影响。

这种协商一致的时间安排对于某一特定时间内采取某种行动的法律义务等事项是有用的。 对于某一事件是否在最后期限之前发生，以及时间戳抵制攻击者的操纵，将达成共识。 在区块链中，每个区块包含一个时间戳, 但它只反映一个时钟：那个时钟在矿工电脑上挖掘那个时钟。

### 公平交易订单

交易按其时间顺序排序。 由于分配给个别交易的时间安排是公平的，因此所产生的订单也是公平的。 这对某些使用案例至关重要。 例如，想象一个股票市场。 Alice和Bob 双方都试图以相同的价格在同一时间购买股票的最后一个可用份额。 在区块链中，矿工可能会将这两笔交易放在一个区块中，并且完全可以自由地选择它们的顺序。 或者矿工可能选择只包含Alic的交易，并将博客推迟到未来的块。 在散列图中，个人无法不适当地影响这些交易的协商一致顺序。 Alice能做的最好是投资于更好的互联网连接，从而使她的交易能够在博客之前到达每一个人。 这是一个公平的竞争方式。

## 常见问题

<details>

<summary>哈希图共识算法是什么？ 它是如何工作的？</summary>

散列图协商一致算法是赫德拉使用的一种分布式协商一致机制。 它使用一个叫做 [hashgraph]的数据结构(../../supportand-community/glossary.md#hashgraph)，以及一个叫做Gossip 协议的协商一致机制。 这种结合使我们能够达成迅速、公平和可靠的共识。 该算法由每个节点在网络共享信息（或“gossiping”）中运行，以随机顺序与其他节点进行交易。

</details>

<details>

<summary>哈希图共识算法的安全性如何？</summary>

哈希图是安全的，因为它是异步的 Byzantine 故障公差(aBF) 。 这意味着任何一个成员或少数成员群体都不能阻止社区达成共识或在达成共识后改变共识。 它也是 ACID 当用作分布式数据库时兼容，并且它能够适应[分布式拒绝服务(DDoS)](../../support-community/glossary.md#distributed-ddos)的攻击。

</details>

<details>

<summary>什么是虚拟投票？</summary>

虚拟投票是哈希图协商一致算法的一个组成部分。 它使节点能够知道其他节点会投票赞成什么，而不需要通过互联网进行实际投票。 完成这项工作的方法是审查gossip (他与谁交谈，按什么顺序)的历史，以确定节点如何根据它可能掌握的信息进行投票。

</details>
